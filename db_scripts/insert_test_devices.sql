-- 设备调度建议功能测试数据
-- 插入测试设备数据

USE shec_psims;

-- 清空现有数据（如果需要）
DELETE FROM devices WHERE device_id > 0;

-- 插入测试设备数据
INSERT INTO devices (device_name, device_model, status, department_name, purchase_date, last_maintenance_date) VALUES
-- 内科设备
('心电图机-飞利浦', 'ECG-PHI-001', 1, '内科', '2023-01-15 10:00:00', '2024-06-01 09:00:00'),
('血压监测仪', 'BP-MON-001', 0, '内科', '2023-02-20 14:00:00', '2024-05-15 10:30:00'),
('血糖仪', 'BG-MET-001', 1, '内科', '2023-03-10 11:00:00', '2024-07-01 08:00:00'),
('输液泵-A型', 'INF-PUM-A01', 0, '内科', '2023-04-05 16:00:00', '2024-04-20 15:00:00'),

-- 外科设备
('手术显微镜', 'SUR-MIC-001', 1, '外科', '2022-12-01 08:00:00', '2024-05-10 07:30:00'),
('电刀设备', 'ELE-KNI-001', 1, '外科', '2023-01-20 13:00:00', '2024-06-25 14:00:00'),
('麻醉机', 'ANE-MAC-001', 0, '外科', '2023-02-15 09:00:00', '2024-07-10 11:00:00'),
('呼吸机-迈瑞', 'VEN-MIN-001', 0, '外科', '2023-03-25 15:00:00', '2024-06-30 16:00:00'),

-- 儿科设备
('儿童心电图机', 'ECG-CHI-001', 0, '儿科', '2023-05-10 10:00:00', '2024-05-20 09:00:00'),
('婴儿培养箱', 'INC-BAB-001', 1, '儿科', '2023-06-15 12:00:00', '2024-07-05 10:00:00'),
('儿童呼吸机', 'VEN-CHI-001', 0, '儿科', '2023-07-20 14:00:00', '2024-06-15 13:00:00'),
('黄疸治疗仪', 'JAU-TRE-001', 0, '儿科', '2023-08-05 11:00:00', '2024-07-20 12:00:00'),

-- 急诊科设备
('除颤器', 'DEF-EQU-001', 1, '急诊科', '2023-01-08 07:00:00', '2024-06-10 08:00:00'),
('急救呼吸机', 'VEN-EME-001', 1, '急诊科', '2023-02-12 09:00:00', '2024-07-15 10:00:00'),
('心电监护仪', 'ECG-MON-001', 1, '急诊科', '2023-03-18 13:00:00', '2024-05-25 14:00:00'),
('急救推车', 'EME-CAR-001', 1, '急诊科', '2023-04-22 15:00:00', '2024-06-05 16:00:00'),

-- 重症监护设备
('多参数监护仪', 'MUL-MON-001', 1, '重症监护', '2023-01-12 08:30:00', '2024-06-20 09:30:00'),
('呼吸机-德尔格', 'VEN-DRA-001', 1, '重症监护', '2023-02-18 10:30:00', '2024-07-08 11:30:00'),
('血液净化机', 'BLO-PUR-001', 2, '重症监护', '2023-03-22 12:30:00', '2024-07-25 13:30:00'),
('体外循环机', 'EXT-CIR-001', 1, '重症监护', '2023-04-28 14:30:00', '2024-06-12 15:30:00'),

-- 影像科设备
('X光机-西门子', 'XRA-SIE-001', 0, '影像科', '2022-11-15 09:00:00', '2024-05-30 10:00:00'),
('CT扫描仪', 'CT-SCA-001', 1, '影像科', '2022-12-20 11:00:00', '2024-06-18 12:00:00'),
('MRI设备', 'MRI-EQU-001', 2, '影像科', '2023-01-25 13:00:00', '2024-07-22 14:00:00'),
('超声诊断仪', 'ULT-DIA-001', 1, '影像科', '2023-02-28 15:00:00', '2024-06-08 16:00:00');

-- 验证插入的数据
SELECT 
    device_name,
    device_model,
    CASE status 
        WHEN 0 THEN '闲置'
        WHEN 1 THEN '使用中'
        WHEN 2 THEN '维修中'
        ELSE '未知'
    END as status_desc,
    department_name,
    purchase_date,
    last_maintenance_date
FROM devices 
ORDER BY department_name, device_name;

-- 按部门统计设备状态
SELECT 
    department_name,
    SUM(CASE WHEN status = 0 THEN 1 ELSE 0 END) as idle_count,
    SUM(CASE WHEN status = 1 THEN 1 ELSE 0 END) as in_use_count,
    SUM(CASE WHEN status = 2 THEN 1 ELSE 0 END) as maintenance_count,
    COUNT(*) as total_count
FROM devices 
WHERE is_deleted = 0
GROUP BY department_name
ORDER BY department_name;
